# RuChat Messenger –¥–ª—è Android

## üì± –û–ø–∏—Å–∞–Ω–∏–µ

Android-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞ RuChat —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:
- ‚úÖ –ö–∞–º–µ—Ä–∞ (–≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∏, —Ñ–æ—Ç–æ)
- ‚úÖ –ú–∏–∫—Ä–æ—Ñ–æ–Ω (–∞—É–¥–∏–æ–∑–≤–æ–Ω–∫–∏, –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è)
- ‚úÖ –§–∞–π–ª—ã (–æ—Ç–ø—Ä–∞–≤–∫–∞/–ø–æ–ª—É—á–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤)
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ WebRTC –¥–ª—è –∑–≤–æ–Ω–∫–æ–≤

## üöÄ –ë—ã—Å—Ç—Ä–∞—è —Å–±–æ—Ä–∫–∞ APK

### –°–ø–æ—Å–æ–± 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ JDK 17** (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω):
   - –°–∫–∞—á–∞–π—Ç–µ —Å [adoptium.net](https://adoptium.net/)
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤ `C:\Program Files\Java\jdk-17`

2. **–ó–∞–¥–∞–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é JAVA_HOME**:
   ```cmd
   setx JAVA_HOME "C:\Program Files\Java\jdk-17"
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–±–æ—Ä–∫—É**:
   ```cmd
   cd c:\RUCHATMESSEN\android
   build-apk.bat
   ```

4. **–ì–æ—Ç–æ–≤—ã–π APK** –±—É–¥–µ—Ç –≤:
   ```
   android\app\build\outputs\apk\debug\app-debug.apk
   ```

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ Android Studio

1. –û—Ç–∫—Ä–æ–π—Ç–µ Android Studio
2. File ‚Üí Open ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –ø–∞–ø–∫—É `android`
3. –ü–æ–¥–æ–∂–¥–∏—Ç–µ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é
4. Build ‚Üí Build Bundle(s) / APK(s) ‚Üí Build APK(s)

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è —Å–±–æ—Ä–∫–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –í–µ—Ä—Å–∏—è | –ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å |
|-----------|--------|----------------|
| JDK | 17+ | [adoptium.net](https://adoptium.net/) |
| Android SDK | 34 | Android Studio –∏–ª–∏ SDK Manager |
| Gradle | 8.2 | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ wrapper |

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```cmd
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
JAVA_HOME=C:\Program Files\Java\jdk-17

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–µ—Å–ª–∏ –µ—Å—Ç—å Android SDK)
ANDROID_HOME=C:\Users\%USERNAME%\AppData\Local\Android\Sdk
ANDROID_SDK_ROOT=C:\Users\%USERNAME%\AppData\Local\Android\Sdk
```

## üì≤ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ

### –ß–µ—Ä–µ–∑ ADB (–æ—Ç–ª–∞–¥–∫–∞ –ø–æ USB)

1. –í–∫–ª—é—á–∏—Ç–µ **–û—Ç–ª–∞–¥–∫—É –ø–æ USB** –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ:
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –û —Ç–µ–ª–µ—Ñ–æ–Ω–µ ‚Üí 7 —Ä–∞–∑ –Ω–∞–∂–º–∏—Ç–µ "–ù–æ–º–µ—Ä —Å–±–æ—Ä–∫–∏"
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ ‚Üí –û—Ç–ª–∞–¥–∫–∞ –ø–æ USB

2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∫ –ü–ö

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ APK:
   ```cmd
   adb install app-debug.apk
   ```

### –ü—Ä—è–º–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `app-debug.apk` –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
2. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
3. –†–∞–∑—Ä–µ—à–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É –∏–∑ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
4. –ù–∞–∂–º–∏—Ç–µ "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å"

## üîê –†–∞–∑—Ä–µ—à–µ–Ω–∏—è

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è:

| –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ | –î–ª—è —á–µ–≥–æ |
|------------|----------|
| üì∑ CAMERA | –í–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∏, —Ñ–æ—Ç–æ |
| üé§ RECORD_AUDIO | –ê—É–¥–∏–æ–∑–≤–æ–Ω–∫–∏, –≥–æ–ª–æ—Å–æ–≤—ã–µ |
| üìÅ READ/WRITE_EXTERNAL_STORAGE | –§–∞–π–ª—ã (Android 12 –∏ –Ω–∏–∂–µ) |
| üñºÔ∏è READ_MEDIA_IMAGES/VIDEO/AUDIO | –ú–µ–¥–∏–∞ (Android 13+) |
| üåê INTERNET | –†–∞–±–æ—Ç–∞ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞ |
| üîî POST_NOTIFICATIONS | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è |
| üìç ACCESS_FINE_LOCATION | –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) |

## üõ†Ô∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
android/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ src/main/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ java/com/ruchat/messenger/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ MainActivity.java      # –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ res/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout/                # –†–∞–∑–º–µ—Ç–∫–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ values/                # –°—Ç—Ä–æ–∫–∏, —Ç–µ–º—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ drawable/              # –ò–∫–æ–Ω–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mipmap-*/              # –ò–∫–æ–Ω–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ assets/www/                # –í–µ–±-—Ñ–∞–π–ª—ã (–∫–æ–ø–∏—Ä—É—é—Ç—Å—è)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AndroidManifest.xml        # –†–∞–∑—Ä–µ—à–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ build.gradle                   # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ build.gradle                       # –ü—Ä–æ–µ–∫—Ç–Ω—ã–π gradle
‚îú‚îÄ‚îÄ settings.gradle                    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
‚îî‚îÄ‚îÄ build-apk.bat                      # –°–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Firebase

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ –∂–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Firebase, —á—Ç–æ –∏ –≤–µ–±-–≤–µ—Ä—Å–∏—è.

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `firebase.json` —É–∫–∞–∑–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
```json
{
  "apiKey": "YOUR_API_KEY",
  "authDomain": "...",
  "databaseURL": "..."
}
```

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```cmd
adb logcat -s RuChat
```

### –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```cmd
adb shell pm clear com.ruchat.messenger
```

### –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞

```cmd
gradlew.bat clean assembleDebug
```

## üì¶ Release —Å–±–æ—Ä–∫–∞

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–π release –≤–µ—Ä—Å–∏–∏:

1. –°–æ–∑–¥–∞–π—Ç–µ keystore:
   ```cmd
   keytool -genkey -v -keystore ruchat.keystore -alias ruchat -keyalg RSA -keysize 2048 -validity 10000
   ```

2. –î–æ–±–∞–≤—å—Ç–µ –≤ `gradle.properties`:
   ```properties
   RUCHAT_STORE_FILE=ruchat.keystore
   RUCHAT_STORE_PASSWORD=your_password
   RUCHAT_KEY_ALIAS=ruchat
   RUCHAT_KEY_PASSWORD=your_key_password
   ```

3. –û–±–Ω–æ–≤–∏—Ç–µ `app/build.gradle`:
   ```gradle
   android {
       signingConfigs {
           release {
               storeFile file(RUCHAT_STORE_FILE)
               storePassword RUCHAT_STORE_PASSWORD
               keyAlias RUCHAT_KEY_ALIAS
               keyPassword RUCHAT_KEY_PASSWORD
           }
       }
       buildTypes {
           release {
               signingConfig signingConfigs.release
               minifyEnabled true
               proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
           }
       }
   }
   ```

4. –°–æ–±–µ—Ä–∏—Ç–µ:
   ```cmd
   gradlew.bat assembleRelease
   ```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `adb logcat`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ —Ä–∞–º–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ RuChat.
