/* ==========================================================
   10. Р­РњРћР”Р—Р / РњР•РќР® / РџРћРРЎРљ
   ========================================================== */
const emojis = {
  "РЎРјР°Р№Р»РёРєРё": ["рџЂ", "рџѓ", "рџ„", "рџЃ", "рџ†", "рџ…", "рџ‚", "рџ¤Ј", "рџЉ", "рџ‡", "рџ™‚", "рџ™ѓ", "рџ‰", "рџЊ", "рџЌ", "рџҐ°", "рџ", "рџ—", "рџ™", "рџљ", "рџ‹", "рџ›", "рџќ", "рџњ", "рџ¤Є", "рџ¤Ё", "рџ§ђ", "рџ¤“", "рџЋ", "рџ¤©", "рџҐі", "рџЏ", "рџ’", "рџћ", "рџ”", "рџџ", "рџ•", "рџ™Ѓ", "в№пёЏ", "рџЈ", "рџ–", "рџ«", "рџ©", "рџҐє", "рџў", "рџ­", "рџ¤", "рџ ", "рџЎ", "рџ¤¬", "рџ¤Ї", "рџі", "рџҐµ", "рџҐ¶", "рџ±", "рџЁ", "рџ°", "рџҐ", "рџ“", "рџ¤—", "рџ¤”", "рџ¤­", "рџ¤«", "рџ¤Ґ", "рџ¶", "рџђ", "рџ‘", "рџ¬", "рџ™„", "рџЇ", "рџ¦", "рџ§", "рџ®", "рџІ", "рџҐ±", "рџґ", "рџ¤¤", "рџЄ", "рџµ", "рџ¤ђ", "рџҐґ", "рџ¤ў", "рџ¤®", "рџ¤§", "рџ·", "рџ¤’", "рџ¤•", "рџ¤‘", "рџ¤ ", "рџ€", "рџ‘ї", "рџ‘№", "рџ‘є", "рџ¤Ў", "рџ’©", "рџ‘»", "рџ’Ђ", "в пёЏ", "рџ‘Ѕ", "рџ‘ѕ", "рџ¤–", "рџЋѓ", "рџє", "рџё", "рџ№", "рџ»", "рџј", "рџЅ", "рџ™Ђ", "рџї", "рџѕ"],
  "Р–РµСЃС‚С‹": ["рџ‘‹", "рџ¤љ", "рџ–ђпёЏ", "вњ‹", "рџ––", "рџ‘Њ", "рџ¤Њ", "рџ¤Џ", "вњЊпёЏ", "рџ¤ћ", "рџ¤џ", "рџ¤", "рџ¤™", "рџ‘€", "рџ‘‰", "рџ‘†", "рџ–•", "рџ‘‡", "вќпёЏ", "рџ‘Ќ", "рџ‘Ћ", "вњЉ", "рџ‘Љ", "рџ¤›", "рџ¤њ", "рџ‘Џ", "рџ™Њ", "рџ‘ђ", "рџ¤І", "рџ¤ќ", "рџ™Џ", "вњЌпёЏ", "рџ’…", "рџ¤і", "рџ’Є", "рџ¦ѕ", "рџ¦ї", "рџ¦µ", "рџ¦¶", "рџ‘‚", "рџ¦»", "рџ‘ѓ", "рџ§ ", "рџ«Ђ", "рџ«Ѓ", "рџ¦·", "рџ¦ґ", "рџ‘Ђ", "рџ‘ЃпёЏ", "рџ‘…", "рџ‘„", "рџ’‹", "рџ©ё"],
  "Р›СЋРґРё": ["рџ‘¶", "рџ§’", "рџ‘¦", "рџ‘§", "рџ§‘", "рџ‘Ё", "рџ‘©", "рџ§”", "рџ‘±вЂЌв™‚пёЏ", "рџ‘±вЂЌв™ЂпёЏ", "рџ§“", "рџ‘ґ", "рџ‘µ", "рџ™Ќ", "рџ™ЌвЂЌв™‚пёЏ", "рџ™ЌвЂЌв™ЂпёЏ", "рџ™Ћ", "рџ™ЋвЂЌв™‚пёЏ", "рџ™ЋвЂЌв™ЂпёЏ", "рџ™…", "рџ™…вЂЌв™‚пёЏ", "рџ™…вЂЌв™ЂпёЏ", "рџ™†", "рџ™†вЂЌв™‚пёЏ", "рџ™†вЂЌв™ЂпёЏ", "рџ’Ѓ", "рџ’ЃвЂЌв™‚пёЏ", "рџ’ЃвЂЌв™ЂпёЏ", "рџ™‹", "рџ™‹вЂЌв™‚пёЏ", "рџ™‹вЂЌв™ЂпёЏ", "рџ§Џ", "рџ§ЏвЂЌв™‚пёЏ", "рџ§ЏвЂЌв™ЂпёЏ", "рџ™‡", "рџ™‡вЂЌв™‚пёЏ", "рџ™‡вЂЌв™ЂпёЏ", "рџ¤¦", "рџ¤¦вЂЌв™‚пёЏ", "рџ¤¦вЂЌв™ЂпёЏ", "рџ¤·", "рџ¤·вЂЌв™‚пёЏ", "рџ¤·вЂЌв™ЂпёЏ", "рџ‘ЁвЂЌвљ•пёЏ", "рџ‘©вЂЌвљ•пёЏ", "рџ‘ЁвЂЌрџЋ“", "рџ‘©вЂЌрџЋ“", "рџ‘ЁвЂЌрџЏ«", "рџ‘©вЂЌрџЏ«", "рџ‘ЁвЂЌвљ–пёЏ", "рџ‘©вЂЌвљ–пёЏ", "рџ‘ЁвЂЌрџЊѕ", "рџ‘©вЂЌрџЊѕ", "рџ‘ЁвЂЌрџЌі", "рџ‘©вЂЌрџЌі", "рџ‘ЁвЂЌрџ”§", "рџ‘©вЂЌрџ”§", "рџ‘ЁвЂЌрџЏ­", "рџ‘©вЂЌрџЏ­", "рџ‘ЁвЂЌрџ’ј", "рџ‘©вЂЌрџ’ј", "рџ‘ЁвЂЌрџ”¬", "рџ‘©вЂЌрџ”¬", "рџ‘ЁвЂЌрџ’»", "рџ‘©вЂЌрџ’»", "рџ‘ЁвЂЌрџЋ¤", "рџ‘©вЂЌрџЋ¤", "рџ‘ЁвЂЌрџЋЁ", "рџ‘©вЂЌрџЋЁ", "рџ‘ЁвЂЌвњ€пёЏ", "рџ‘©вЂЌвњ€пёЏ", "рџ‘ЁвЂЌрџљЂ", "рџ‘©вЂЌрџљЂ", "рџ‘ЁвЂЌрџљ’", "рџ‘©вЂЌрџљ’", "рџ‘®", "рџ‘®вЂЌв™‚пёЏ", "рџ‘®вЂЌв™ЂпёЏ", "рџ•µпёЏ", "рџ•µпёЏвЂЌв™‚пёЏ", "рџ•µпёЏвЂЌв™ЂпёЏ", "рџ’‚", "рџ’‚вЂЌв™‚пёЏ", "рџ’‚вЂЌв™ЂпёЏ", "рџҐ·", "рџ‘·", "рџ‘·вЂЌв™‚пёЏ", "рџ‘·вЂЌв™ЂпёЏ", "рџ¤ґ", "рџ‘ё", "рџ‘і", "рџ‘івЂЌв™‚пёЏ", "рџ‘івЂЌв™ЂпёЏ", "рџ‘І", "рџ§•", "рџ¤µ", "рџ¤µвЂЌв™‚пёЏ", "рџ¤µвЂЌв™ЂпёЏ", "рџ‘°", "рџ‘°вЂЌв™‚пёЏ", "рџ‘°вЂЌв™ЂпёЏ", "рџ¤°", "рџ¤±", "рџ‘©вЂЌрџЌј", "рџ‘ЁвЂЌрџЌј", "рџ§‘вЂЌрџЌј", "рџ‘ј", "рџЋ…", "рџ¤¶", "рџ§‘вЂЌрџЋ„", "рџ¦ё", "рџ¦ёвЂЌв™‚пёЏ", "рџ¦ёвЂЌв™ЂпёЏ", "рџ¦№", "рџ¦№вЂЌв™‚пёЏ", "рџ¦№вЂЌв™ЂпёЏ", "рџ§™", "рџ§™вЂЌв™‚пёЏ", "рџ§™вЂЌв™ЂпёЏ", "рџ§љ", "рџ§љвЂЌв™‚пёЏ", "рџ§љвЂЌв™ЂпёЏ", "рџ§›", "рџ§›вЂЌв™‚пёЏ", "рџ§›вЂЌв™ЂпёЏ", "рџ§њ", "рџ§њвЂЌв™‚пёЏ", "рџ§њвЂЌв™ЂпёЏ", "рџ§ќ", "рџ§ќвЂЌв™‚пёЏ", "рџ§ќвЂЌв™ЂпёЏ", "рџ§ћ", "рџ§ћвЂЌв™‚пёЏ", "рџ§ћвЂЌв™ЂпёЏ", "рџ§џ", "рџ§џвЂЌв™‚пёЏ", "рџ§џвЂЌв™ЂпёЏ", "рџ’†", "рџ’†вЂЌв™‚пёЏ", "рџ’†вЂЌв™ЂпёЏ", "рџ’‡", "рџ’‡вЂЌв™‚пёЏ", "рџ’‡вЂЌв™ЂпёЏ", "рџљ¶", "рџљ¶вЂЌв™‚пёЏ", "рџљ¶вЂЌв™ЂпёЏ", "рџ§Ќ", "рџ§ЌвЂЌв™‚пёЏ", "рџ§ЌвЂЌв™ЂпёЏ", "рџ§Ћ", "рџ§ЋвЂЌв™‚пёЏ", "рџ§ЋвЂЌв™ЂпёЏ", "рџЏѓ", "рџЏѓвЂЌв™‚пёЏ", "рџЏѓвЂЌв™ЂпёЏ", "рџ’ѓ", "рџ•є", "рџ•ґпёЏ", "рџ‘Ї", "рџ‘ЇвЂЌв™‚пёЏ", "рџ‘ЇвЂЌв™ЂпёЏ", "рџ§–", "рџ§–вЂЌв™‚пёЏ", "рџ§–вЂЌв™ЂпёЏ", "рџ§—", "рџ§—вЂЌв™‚пёЏ", "рџ§—вЂЌв™ЂпёЏ", "рџ¤є", "рџЏ‡", "в›·пёЏ", "рџЏ‚", "рџЏЊпёЏ", "рџЏЊпёЏвЂЌв™‚пёЏ", "рџЏЊпёЏвЂЌв™ЂпёЏ", "рџЏ„", "рџЏ„вЂЌв™‚пёЏ", "рџЏ„вЂЌв™ЂпёЏ", "рџљЈ", "рџљЈвЂЌв™‚пёЏ", "рџљЈвЂЌв™ЂпёЏ", "рџЏЉ", "рџЏЉвЂЌв™‚пёЏ", "рџЏЉвЂЌв™ЂпёЏ", "в›№пёЏ", "в›№пёЏвЂЌв™‚пёЏ", "в›№пёЏвЂЌв™ЂпёЏ", "рџЏ‹пёЏ", "рџЏ‹пёЏвЂЌв™‚пёЏ", "рџЏ‹пёЏвЂЌв™ЂпёЏ", "рџљґ", "рџљґвЂЌв™‚пёЏ", "рџљґвЂЌв™ЂпёЏ", "рџљµ", "рџљµвЂЌв™‚пёЏ", "рџљµвЂЌв™ЂпёЏ", "рџ¤ё", "рџ¤ёвЂЌв™‚пёЏ", "рџ¤ёвЂЌв™ЂпёЏ", "рџ¤Ѕ", "рџ¤ЅвЂЌв™‚пёЏ", "рџ¤ЅвЂЌв™ЂпёЏ", "рџ¤ѕ", "рџ¤ѕвЂЌв™‚пёЏ", "рџ¤ѕвЂЌв™ЂпёЏ", "рџ¤№", "рџ¤№вЂЌв™‚пёЏ", "рџ¤№вЂЌв™ЂпёЏ", "рџ§", "рџ§вЂЌв™‚пёЏ", "рџ§вЂЌв™ЂпёЏ", "рџ›Ђ", "рџ›Њ", "рџ§‘вЂЌрџ¤ќвЂЌрџ§‘", "рџ‘­", "рџ‘«", "рџ‘¬", "рџ’Џ", "рџ’‘", "рџ‘Є", "рџ—ЈпёЏ", "рџ‘¤", "рџ‘Ґ", "рџ«‚"],
  "Р–РёРІРѕС‚РЅС‹Рµ": ["рџђ¶", "рџђ±", "рџђ­", "рџђ№", "рџђ°", "рџ¦Љ", "рџђ»", "рџђј", "рџђЁ", "рџђЇ", "рџ¦Ѓ", "рџђ®", "рџђ·", "рџђЅ", "рџђё", "рџђµ", "рџ™€", "рџ™‰", "рџ™Љ", "рџђ’", "рџђ”", "рџђ§", "рџђ¦", "рџђ¤", "рџђЈ", "рџђҐ", "рџ¦†", "рџ¦…", "рџ¦‰", "рџ¦‡", "рџђє", "рџђ—", "рџђґ", "рџ¦„", "рџђќ", "рџЄ±", "рџђ›", "рџ¦‹", "рџђЊ", "рџђћ", "рџђњ", "рџЄ°", "рџЄІ", "рџЄі", "рџ¦џ", "рџ¦—", "рџ•·пёЏ", "рџ•ёпёЏ", "рџ¦‚", "рџђў", "рџђЌ", "рџ¦Ћ", "рџ¦–", "рџ¦•", "рџђ™", "рџ¦‘", "рџ¦ђ", "рџ¦ћ", "рџ¦Ђ", "рџђЎ", "рџђ ", "рџђџ", "рџђ¬", "рџђі", "рџђ‹", "рџ¦€", "рџђЉ", "рџђ…", "рџђ†", "рџ¦“", "рџ¦Ќ", "рџ¦§", "рџ¦Ј", "рџђ", "рџ¦›", "рџ¦Џ", "рџђЄ", "рџђ«", "рџ¦’", "рџ¦", "рџђѓ", "рџђ‚", "рџђ„", "рџђЋ", "рџђ–", "рџђЏ", "рџђ‘", "рџ¦™", "рџђђ", "рџ¦Њ", "рџђ•", "рџђ©", "рџ¦®", "рџђ•вЂЌрџ¦є", "рџђ€", "рџђ€вЂЌв¬›", "рџЄ¶", "рџђ“", "рџ¦ѓ", "рџ¦¤", "рџ¦љ", "рџ¦њ", "рџ¦ў", "рџ¦©", "рџ•ЉпёЏ", "рџђ‡", "рџ¦ќ", "рџ¦Ё", "рџ¦Ў", "рџ¦«", "рџ¦¦", "рџ¦Ґ", "рџђЃ", "рџђЂ", "рџђїпёЏ", "рџ¦”", "рџђѕ", "рџђ‰", "рџђІ"],
  "Р•РґР°": ["рџЌЏ", "рџЌЋ", "рџЌђ", "рџЌЉ", "рџЌ‹", "рџЌЊ", "рџЌ‰", "рџЌ‡", "рџЌ“", "рџ«ђ", "рџЌ€", "рџЌ’", "рџЌ‘", "рџҐ­", "рџЌЌ", "рџҐҐ", "рџҐќ", "рџЌ…", "рџЌ†", "рџҐ‘", "рџҐ¦", "рџҐ¬", "рџҐ’", "рџЊ¶пёЏ", "рџ«‘", "рџЊЅ", "рџҐ•", "рџ«’", "рџ§„", "рџ§…", "рџҐ”", "рџЌ ", "рџҐђ", "рџҐЇ", "рџЌћ", "рџҐ–", "рџҐЁ", "рџ§Ђ", "рџҐљ", "рџЌі", "рџ§€", "рџҐћ", "рџ§‡", "рџҐ“", "рџҐ©", "рџЌ—", "рџЌ–", "рџ¦ґ", "рџЊ­", "рџЌ”", "рџЌџ", "рџЌ•", "рџ«“", "рџҐЄ", "рџҐ™", "рџ§†", "рџЊ®", "рџЊЇ", "рџ«”", "рџҐ—", "рџҐ", "рџ«•", "рџҐ«", "рџЌќ", "рџЌњ", "рџЌІ", "рџЌ›", "рџЌЈ", "рџЌ±", "рџҐџ", "рџ¦Є", "рџЌ¤", "рџЌ™", "рџЌљ", "рџЌ", "рџЌҐ", "рџҐ ", "рџҐ®", "рџЌў", "рџЌЎ", "рџЌ§", "рџЌЁ", "рџЌ¦", "рџҐ§", "рџ§Ѓ", "рџЌ°", "рџЋ‚", "рџЌ®", "рџЌ­", "рџЌ¬", "рџЌ«", "рџЌї", "рџЌ©", "рџЌЄ", "рџЊ°", "рџҐњ", "рџЌЇ", "рџҐ›", "рџЌј", "рџ«–", "в•", "рџЌµ", "рџ§ѓ", "рџҐ¤", "рџ§‹", "рџЌ¶", "рџЌє", "рџЌ»", "рџҐ‚", "рџЌ·", "рџҐѓ", "рџЌё", "рџЌ№", "рџ§‰", "рџЌѕ", "рџ§Љ", "рџҐ„", "рџЌґ", "рџЌЅпёЏ", "рџҐЈ", "рџҐЎ", "рџҐў", "рџ§‚"],
  "РџСѓС‚РµС€РµСЃС‚РІРёСЏ": ["рџЊЌ", "рџЊЋ", "рџЊЏ", "рџЊђ", "рџ—єпёЏ", "рџ—ѕ", "рџ§­", "рџЏ”пёЏ", "в›°пёЏ", "рџЊ‹", "рџ—»", "рџЏ•пёЏ", "рџЏ–пёЏ", "рџЏњпёЏ", "рџЏќпёЏ", "рџЏћпёЏ", "рџЏџпёЏ", "рџЏ›пёЏ", "рџЏ—пёЏ", "рџ§±", "рџЄЁ", "рџЄµ", "рџ›–", "рџЏпёЏ", "рџЏљпёЏ", "рџЏ ", "рџЏЎ", "рџЏў", "рџЏЈ", "рџЏ¤", "рџЏҐ", "рџЏ¦", "рџЏЁ", "рџЏ©", "рџЏЄ", "рџЏ«", "рџЏ¬", "рџЏ­", "рџЏЇ", "рџЏ°", "рџ’’", "рџ—ј", "рџ—Ѕ", "в›Є", "рџ•Њ", "рџ›•", "рџ•Ќ", "в›©пёЏ", "рџ•‹", "в›І", "в›є", "рџЊЃ", "рџЊѓ", "рџЏ™пёЏ", "рџЊ„", "рџЊ…", "рџЊ†", "рџЊ‡", "рџЊ‰", "в™ЁпёЏ", "рџЋ ", "рџЋЎ", "рџЋў", "рџ’€", "рџЋЄ", "рџљ‚", "рџљѓ", "рџљ„", "рџљ…", "рџљ†", "рџљ‡", "рџљ€", "рџљ‰", "рџљЉ", "рџљќ", "рџљћ", "рџљ‹", "рџљЊ", "рџљЌ", "рџљЋ", "рџљђ", "рџљ‘", "рџљ’", "рџљ“", "рџљ”", "рџљ•", "рџљ–", "рџљ—", "рџљ", "рџљ™", "рџ›»", "рџљљ", "рџљ›", "рџљњ", "рџЏЋпёЏ", "рџЏЌпёЏ", "рџ›µ", "рџљІ", "рџ›ґ", "рџ›№", "рџљЏ", "рџ›ЈпёЏ", "рџ›¤пёЏ", "рџ›ўпёЏ", "в›Ѕ", "рџљЁ", "рџљҐ", "рџљ¦", "рџ›‘", "рџљ§", "вљ“", "в›µ", "рџ›¶", "рџљ¤", "рџ›іпёЏ", "в›ґпёЏ", "рџ›ҐпёЏ", "рџљў", "вњ€пёЏ", "рџ›©пёЏ", "рџ›«", "рџ›¬", "рџЄ‚", "рџ’є", "рџљЃ", "рџљџ", "рџљ ", "рџљЎ", "рџ›°пёЏ", "рџљЂ", "рџ›ё", "рџ›ЋпёЏ", "рџ§і", "вЊ›", "вЏі", "вЊљ", "вЏ°", "вЏ±пёЏ", "вЏІпёЏ", "рџ•°пёЏ", "рџЊЎпёЏ", "рџ§­", "рџЋ€", "рџЋ‰", "рџЋЉ", "рџЋЋ", "рџЋЏ", "рџЋђ", "рџЋЂ", "рџЋЃ", "рџ§§", "рџЋ«", "рџЏ®", "рџЄ”", "рџ§Ё", "вњЁ", "рџЋ€", "рџЋ‰", "рџЋЉ", "рџЋ‹", "рџЋЌ", "рџЋЋ", "рџЋЏ", "рџЋђ", "рџЋ‘", "рџ§§", "рџЋЂ", "рџЋЃ", "рџЋ—пёЏ", "рџЋџпёЏ", "рџЋ«", "рџЋ–пёЏ", "рџЏ†", "рџЏ…", "рџҐ‡", "рџҐ€", "рџҐ‰", "вљЅ", "вљѕ", "рџҐЋ", "рџЏЂ", "рџЏђ", "рџЏ€", "рџЏ‰", "рџЋѕ", "рџҐЏ", "рџЋі", "рџЏЏ", "рџЏ‘", "рџЏ’", "рџҐЌ", "рџЏ“", "рџЏё", "рџҐЉ", "рџҐ‹", "рџҐ…", "в›і", "в›ёпёЏ", "рџЋЈ", "рџ¤ї", "рџЋЅ", "рџЋї", "рџ›·", "рџҐЊ", "рџЋЇ", "рџЄЂ", "рџЄЃ", "рџ”«", "рџЋ±", "рџ”®", "рџЄ„", "рџЋ®", "рџ•№пёЏ", "рџЋ°", "рџЋІ", "рџ§©", "рџ§ё", "рџЄ…", "рџЄ†", "в™ пёЏ", "в™ҐпёЏ", "в™¦пёЏ", "в™ЈпёЏ", "в™џпёЏ", "рџѓЏ", "рџЂ„", "рџЋґ", "рџЋ­", "рџ–јпёЏ", "рџЋЁ", "рџ§µ", "рџЄЎ", "рџ§¶", "рџЄў", "рџ‘“", "рџ•¶пёЏ", "рџҐЅ", "рџҐј", "рџ¦є", "рџ‘”", "рџ‘•", "рџ‘–", "рџ§Ј", "рџ§¤", "рџ§Ґ", "рџ§¦", "рџ‘—", "рџ‘", "рџҐ»", "рџ©±", "рџ©І", "рџ©і", "рџ‘™", "рџ‘љ", "рџ‘›", "рџ‘њ", "рџ‘ќ", "рџЋ’", "рџ‘ћ", "рџ‘џ", "рџҐѕ", "рџҐї", "рџ‘ ", "рџ‘Ў", "рџ©°", "рџ‘ў", "рџ‘‘", "рџ‘’", "рџЋ©", "рџЋ“", "рџ§ў", "в›‘пёЏ", "рџ’„", "рџ’Ќ", "рџ’ј"]
};

function initEmojiPicker() {
  const cats = document.getElementById("emojiCategories");
  const grid = document.getElementById("emojiGrid");
  const search = document.getElementById("emojiSearch");
  Object.keys(emojis).forEach(cat => {
    const b = document.createElement("button");
    b.className = "emoji-category-btn";
    b.textContent = emojis[cat][0];
    b.title = cat;
    b.onclick = () => loadEmojiCategory(cat);
    cats.appendChild(b);
  });
  if (Object.keys(emojis).length) loadEmojiCategory(Object.keys(emojis)[0]);
  search.addEventListener("input", () => {
    const q = search.value.toLowerCase();
    const all = Object.values(emojis).flat();
    const f = all.filter(e => e.includes(q));
    renderEmojis(f);
  });
}

function loadEmojiCategory(cat) {
  document.querySelectorAll(".emoji-category-btn").forEach(b => b.classList.remove("active"));
  document.querySelector(`[title="${cat}"]`).classList.add("active");
  renderEmojis(emojis[cat]);
}

function renderEmojis(list) {
  const g = document.getElementById("emojiGrid");
  g.innerHTML = "";
  list.forEach(e => {
    const sp = document.createElement("div");
    sp.className = "emoji-item";
    sp.textContent = e;
    sp.onclick = () => insertEmoji(e);
    g.appendChild(sp);
  });
}

function insertEmoji(e) {
  const ti = document.getElementById("text");
  const cp = ti.selectionStart;
  const txt = ti.value;
  ti.value = txt.substring(0, cp) + e + txt.substring(cp);
  ti.focus();
  ti.setSelectionRange(cp + e.length, cp + e.length);
  updateSendButton();
}
