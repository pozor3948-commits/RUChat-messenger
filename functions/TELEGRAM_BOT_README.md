# Telegram Bot –¥–ª—è RuChat

–ë–æ—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –≤ RuChat.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd functions
npm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env` –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ:

- `TELEGRAM_BOT_TOKEN` - —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
- `ADMIN_PASSWORD` - –∞–¥–º–∏–Ω-–ø–∞—Ä–æ–ª—å (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: `20091326`)
- `ALLOWED_TELEGRAM_IDS` - Telegram ID —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 3. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
npm run start:bot
```

–ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é:

```bash
node telegram-bot.js
```

## üìã –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `/start` | –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞, –ø–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω—é |
| `/accounts` | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ (—Ç—Ä–µ–±—É–µ—Ç –ø–∞—Ä–æ–ª—å) |
| `/stats` | –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞ |
| `/help` | –°–ø—Ä–∞–≤–∫–∞ –ø–æ –±–æ—Ç—É |

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–ê–¥–º–∏–Ω-–ø–∞—Ä–æ–ª—å**: –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `20091326`. –ò–∑–º–µ–Ω–∏—Ç–µ –≤ `.env`!
2. **Telegram ID**: –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É–∫–∞–∑–∞—Ç—å –≤–∞—à–∏ Telegram ID –≤ `ALLOWED_TELEGRAM_IDS`
3. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å

### –ö–∞–∫ —É–∑–Ω–∞—Ç—å —Å–≤–æ–π Telegram ID

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É [@userinfobot](https://t.me/userinfobot) —Å–æ–æ–±—â–µ–Ω–∏–µ
2. –û–Ω –≤–µ—Ä–Ω—ë—Ç –≤–∞—à —á–∏—Å–ª–æ–≤–æ–π ID
3. –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ—Ç ID –≤ `ALLOWED_TELEGRAM_IDS` –≤ —Ñ–∞–π–ª–µ `.env`

## üìä –î–∞–Ω–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç–æ–≤

–ë–æ—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–µ–¥—É—é—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ –∫–∞–∂–¥–æ–º—É –∞–∫–∫–∞—É–Ω—Ç—É:

- –õ–æ–≥–∏–Ω (username)
- Email
- –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- –ü—Ä–æ–≤–∞–π–¥–µ—Ä –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –°–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π
- –°–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø
- –í—Ö–æ–¥—è—â–∏–µ/–∏—Å—Ö–æ–¥—è—â–∏–µ –∑–∞—è–≤–∫–∏ –≤ –¥—Ä—É–∑—å—è
- –°—Ç–∞—Ç—É—Å (–≤ —Å–µ—Ç–∏/–æ—Ñ—Ñ–ª–∞–π–Ω)
- –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—Ö–æ–¥–∞
- –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞
- –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å **Firebase Realtime Database**
- –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø –∫ Firebase Admin SDK
- –ó–∞–ø—É—Å–∫–∞–π—Ç–µ –±–æ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö
- –ù–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –∏ –∞–¥–º–∏–Ω-–ø–∞—Ä–æ–ª—å –≤ –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø

## üîß –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### –ß–µ—Ä–µ–∑ PM2 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
npm install -g pm2
pm2 start telegram-bot.js --name ruchat-bot
pm2 save
pm2 startup
```

### –ö–∞–∫ systemd —Å–µ—Ä–≤–∏—Å

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `/etc/systemd/system/ruchat-bot.service`:

```ini
[Unit]
Description=RuChat Telegram Bot
After=network.target

[Service]
Type=simple
User=www-data
WorkingDirectory=/path/to/ruchat/functions
ExecStart=/usr/bin/node telegram-bot.js
Restart=always
Environment=NODE_ENV=production

[Install]
WantedBy=multi-user.target
```

–ó–∞—Ç–µ–º:

```bash
sudo systemctl enable ruchat-bot
sudo systemctl start ruchat-bot
sudo systemctl status ruchat-bot
```

## üìù –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```
–í—ã: /accounts
–ë–æ—Ç: üîë –í–≤–µ–¥–∏—Ç–µ –∞–¥–º–∏–Ω-–ø–∞—Ä–æ–ª—å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º:

–í—ã: 20091326
–ë–æ—Ç: ‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...
–ë–æ—Ç: üìä RuChat - –í—Å–µ –∞–∫–∫–∞—É–Ω—Ç—ã

–í—Å–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–æ–≤: 5

==================================================

üë§ user1
   Email: user1@example.com
   –¢–µ–ª–µ—Ñ–æ–Ω: +79991234567
   –ü—Ä–æ–≤–∞–π–¥–µ—Ä: password
   –î—Ä—É–∑—å—è: user2, user3
   –ì—Ä—É–ø–ø—ã: General, Devs
   ...
```

## üÜò Troubleshooting

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –≤ `.env`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –≤ Telegram
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `firebase functions:log`

### –û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ Firebase

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ Firebase Admin SDK
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `FIREBASE_DATABASE_URL`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ

### "–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω"

1. –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à Telegram ID –≤ `ALLOWED_TELEGRAM_IDS`
2. –ò–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ `ALLOWED_TELEGRAM_IDS` –ø—É—Å—Ç—ã–º –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ —Ä–∞–º–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ RuChat.
